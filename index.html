<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë°°ì¹´ì¸„ ë°°êµ¬ - ìºë¦­í„° ì„ íƒ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap');

        body {
            margin: 0; overflow: hidden; height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: 'Black Han Sans', sans-serif;
            color: white;
            user-select: none;
            cursor: none; 
        }

        .cursor-dot {
            width: 20px; height: 20px;
            background: white; border-radius: 50%;
            position: absolute; pointer-events: none;
            z-index: 9999;
            box-shadow: 0 0 10px #fff, 0 0 20px #ff00de;
            transition: transform 0.1s;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #bgCanvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        .container {
            z-index: 10;
            text-align: center;
            display: flex; flex-direction: column; align-items: center;
        }

        h1 {
            font-size: 4.5rem; margin-bottom: 10px;
            color: #fff;
            text-shadow: 0 0 10px #fff, 0 0 20px #ff00de, 0 0 30px #ff00de, 0 0 40px #ff00de;
            animation: glow 1.5s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #ff00de, 0 0 30px #ff00de; }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #ff00de, 0 0 40px #ff00de, 0 0 50px #ff00de; }
        }

        /* ëª¨ë“œ ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .mode-switch {
            display: flex; gap: 20px; margin-bottom: 20px;
            background: rgba(0,0,0,0.3); padding: 10px 20px; border-radius: 20px;
        }
        .mode-btn {
            font-size: 1.5rem; padding: 10px 20px;
            border: 2px solid #555; border-radius: 10px;
            background: rgba(255,255,255,0.1); cursor: none;
            color: #aaa; transition: all 0.2s;
        }
        .mode-btn:hover { background: rgba(255,255,255,0.2); color: white; }
        .mode-btn.active {
            border-color: #00FF00; background: rgba(0, 255, 0, 0.2);
            color: #00FF00; text-shadow: 0 0 10px #00FF00;
            transform: scale(1.1); font-weight: bold;
        }

        .status {
            font-size: 2.2rem; margin-bottom: 20px;
            color: #00d2ff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            background: rgba(0,0,0,0.4);
            padding: 10px 30px; border-radius: 30px;
            border: 2px solid rgba(0, 210, 255, 0.5);
            transition: color 0.3s, border-color 0.3s;
        }

        .char-grid {
            display: flex; gap: 30px;
            perspective: 1000px;
            margin-bottom: 20px;
        }
        
        .char-card {
            width: 200px; height: 280px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            cursor: pointer; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .char-card:hover {
            transform: translateY(-15px) scale(1.05);
            border-color: #ffe53b;
            box-shadow: 0 0 30px rgba(255, 229, 59, 0.6);
            background: rgba(255, 255, 255, 0.2);
        }

        .char-card.selected { filter: grayscale(0.5); pointer-events: none; }
        .char-card.selected.p1-border { border-color: #00d2ff; box-shadow: 0 0 30px rgba(0, 210, 255, 0.6); }
        .char-card.selected.p2-border { border-color: #ff5e62; box-shadow: 0 0 30px rgba(255, 94, 98, 0.6); }
        
        .preview {
            width: 140px; height: 140px;
            background-repeat: no-repeat;
            background-size: 700px 140px; 
            margin-bottom: 25px;
            filter: drop-shadow(5px 5px 5px rgba(0,0,0,0.5));
            transition: transform 0.2s;
        }

        .random-icon {
            font-size: 8rem; color: #ffeb3b;
            text-shadow: 0 0 20px #ff0000;
            margin-bottom: 10px;
            animation: bounce 1s infinite;
            display: block; 
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .char-card:hover .preview { transform: scale(1.1) rotate(5deg); }
        .name { font-size: 1.8rem; color: #fff; text-shadow: 2px 2px 0 #000; }

        .badge {
            position: absolute; top: 10px; right: 10px;
            padding: 5px 10px; border-radius: 10px;
            font-size: 1.2rem; font-weight: bold;
            display: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            transform: rotate(15deg);
        }
        .badge.p1 { background: #00d2ff; color: white; display: block; border: 2px solid white; }
        .badge.p2 { background: #ff5e62; color: white; display: block; border: 2px solid white; }

        .speed-control { margin-top: 10px; text-align: center; }
        .speed-title { font-size: 1.3rem; color: #FFD700; margin-bottom: 5px; text-shadow: 0 0 10px #FF4500; }
        .speed-options { display: flex; gap: 10px; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 15px; }
        .speed-btn {
            padding: 8px 15px; border: 2px solid #555; border-radius: 10px;
            background: rgba(255,255,255,0.1); cursor: none;
            color: #aaa; font-size: 1.1rem; transition: all 0.2s;
        }
        .speed-btn:hover { background: rgba(255,255,255,0.2); color: white; }
        .speed-btn.active {
            border-color: #00FFFF; background: rgba(0, 255, 255, 0.3);
            color: #00FFFF; text-shadow: 0 0 10px #00FFFF;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            transform: scale(1.1); font-weight: bold;
        }

        /* ë²„íŠ¼ ê·¸ë£¹ ë° ê°€ì´ë“œ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-group {
            display: flex; gap: 20px; margin-top: 25px;
        }

        .guide-btn {
            padding: 10px 30px; font-size: 1.5rem;
            background: linear-gradient(45deg, #ff00cc, #333399);
            border: 2px solid #fff; border-radius: 30px; color: white; cursor: none;
            box-shadow: 0 0 20px rgba(255, 0, 204, 0.6); transition: transform 0.2s;
            animation: pulseBtn 2s infinite;
        }
        .guide-btn:hover { transform: scale(1.1); }
        @keyframes pulseBtn {
            0% { box-shadow: 0 0 20px rgba(255, 0, 204, 0.6); }
            50% { box-shadow: 0 0 40px rgba(255, 0, 204, 1); }
            100% { box-shadow: 0 0 20px rgba(255, 0, 204, 0.6); }
        }

        .skill-btn {
            padding: 10px 30px; font-size: 1.5rem;
            background: linear-gradient(45deg, #FFD700, #FF8C00);
            border: 2px solid #fff; border-radius: 30px; color: white; cursor: none;
            box-shadow: 0 0 20px rgba(255, 140, 0, 0.6); transition: transform 0.2s;
            animation: pulseBtn2 2s infinite;
        }
        .skill-btn:hover { transform: scale(1.1); }
        @keyframes pulseBtn2 {
            0% { box-shadow: 0 0 20px rgba(255, 140, 0, 0.6); }
            50% { box-shadow: 0 0 40px rgba(255, 140, 0, 1); }
            100% { box-shadow: 0 0 20px rgba(255, 140, 0, 0.6); }
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px);
            z-index: 100; justify-content: center; align-items: center; cursor: auto;
        }
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 3px solid #00d2ff; border-radius: 20px;
            padding: 30px; width: 1100px;
            max-width: 95%; max-height: 90vh; overflow-y: auto;
            box-shadow: 0 0 50px rgba(0, 210, 255, 0.5); text-align: center; position: relative;
        }
        .skill-modal-content {
            border-color: #FFD700;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
        }

        .modal-title {
            font-size: 3rem; 
            color: #fff; margin-bottom: 20px;
            text-shadow: 0 0 10px #00d2ff; border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 10px;
        }
        .skill-title { color: #FFD700; text-shadow: 0 0 10px #FF4500; }

        .item-list { 
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; text-align: left; 
        }
        .item-category { margin-bottom: 20px; }
        .cat-title { 
            font-size: 1.8rem; 
            margin-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; 
        }
        .cat-buff { color: #00FF00; text-shadow: 0 0 5px #00FF00; }
        .cat-trap { color: #FF0000; text-shadow: 0 0 5px #FF0000; }
        .cat-special { color: #FFD700; text-shadow: 0 0 5px #FFD700; } 
        
        .item-row { 
            display: flex; align-items: center; 
            font-size: 1.3rem; 
            margin-bottom: 10px; 
            background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 10px;
        }
        .item-icon { 
            font-size: 2.2rem; 
            margin-right: 15px; width: 40px; text-align: center; 
        }
        .item-desc { 
            color: #ddd; 
            font-size: 1.1rem; 
        }

        /* ìŠ¤í‚¬ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .skill-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: left;
        }
        .skill-card {
            background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 15px;
            display: flex; align-items: center; border: 1px solid rgba(255,255,255,0.2);
        }
        .skill-icon { font-size: 3rem; margin-right: 20px; width: 60px; text-align: center; }
        .skill-info { display: flex; flex-direction: column; }
        .skill-name { font-size: 1.5rem; font-weight: bold; color: #00d2ff; margin-bottom: 5px; }
        .skill-desc { font-size: 1.1rem; color: #ddd; }

        .close-btn {
            position: absolute; top: 15px; right: 20px;
            font-size: 2.5rem; 
            color: #fff; cursor: pointer; transition: color 0.2s;
        }
        .close-btn:hover { color: #ff0055; }

        .footer { margin-top: 20px; font-size: 1.1rem; color: rgba(255,255,255,0.6); }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>
    
    <div class="cursor-dot" id="cursorDot"></div>

    <div class="modal-overlay" id="itemModal" onclick="closeModal(event, 'itemModal')">
        <div class="modal-content">
            <div class="close-btn" onclick="openModal('itemModal')">Ã—</div>
            <div class="modal-title">âœ¨ ì•„ì´í…œ ë„ê° âœ¨</div>
            <div class="item-list">
                <div class="item-column">
                    <div class="item-category">
                        <div class="cat-title cat-buff">=== ë²„í”„ (BUFF) ===</div>
                        <div class="item-row"><span class="item-icon">âš¡</span><span class="item-desc"><b>ìŠ¤í”¼ë“œ</b>: ì´ë™ ì†ë„ UP!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸš€</span><span class="item-desc"><b>ì í”„</b>: ìŠˆí¼ í•˜ì´ ì í”„!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ„</span><span class="item-desc"><b>ê±°ì¸</b>: ë‚´ ëª¸ì´ ì»¤ì ¸ìš”!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ‘¶</span><span class="item-desc"><b>ë‚œìŸì´</b>: ìƒëŒ€ë°©ì„ ì‘ê²Œ!</span></div>
                        <div class="item-row"><span class="item-icon">â„ï¸</span><span class="item-desc"><b>ì–¼ìŒ</b>: ìƒëŒ€ë¥¼ ì–¼ë ¤ìš”!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ˜µ</span><span class="item-desc"><b>í˜¼ë€</b>: ìƒëŒ€ í‚¤ ë°˜ì „!</span></div>
                    </div>
                </div>
                
                <div class="item-column">
                    <div class="item-category">
                        <div class="cat-title cat-trap">=== í•¨ì • (TRAP) ===</div>
                        <div class="item-row"><span class="item-icon">ğŸŒ</span><span class="item-desc"><b>ë°”ë‚˜ë‚˜</b>: ê½ˆë‹¹! ë¯¸ë„ëŸ¬ì§</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ’©</span><span class="item-desc"><b>ë˜¥</b>: ëƒ„ìƒˆë‚˜ì„œ ëŠë ¤ì§</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ’£</span><span class="item-desc"><b>ì‹œí•œí­íƒ„</b>: ì¾…! ê¸°ì ˆ & ë‚ ì•„ê°</span></div>
                        <div class="item-row"><span class="item-icon">ğŸŒ‘</span><span class="item-desc"><b>ì •ì „</b>: í™”ë©´ì´ ìº„ìº„í•´ì§</span></div>
                        <div class="item-row"><span class="item-icon">ğŸŒªï¸</span><span class="item-desc"><b>íƒœí’</b>: ë°”ëŒì´ ë¶ˆì–´ ë°€ë ¤ë‚¨</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ¦‘</span><span class="item-desc"><b>ì˜¤ì§•ì–´ ë¨¹ë¬¼</b>: í™”ë©´ì„ ê°€ë ¤ìš”!</span></div>
                    </div>
                </div>

                <div class="item-column">
                    <div class="item-category">
                        <div class="cat-title cat-special">=== ìŠ¤í˜ì…œ (SPECIAL) ===</div>
                        <div class="item-row"><span class="item-icon">ğŸ</span><span class="item-desc"><b>ë¹…ë³¼</b>: ê³µì´ 2ë°°~3ë°° ì»¤ì§!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ’</span><span class="item-desc"><b>ë³´ë„ˆìŠ¤</b>: ì ìˆ˜ +1ì  íšë“!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ‘»</span><span class="item-desc"><b>ìœ ë ¹ê³µ</b>: ê³µì´ íˆ¬ëª…í•´ì§!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ¤¥</span><span class="item-desc"><b>ë¶„ì‹ ìˆ </b>: ê°€ì§œ ê³µë“¤ì´ íŠ€ì–´ë‚˜ì˜´!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ§±</span><span class="item-desc"><b>ì² ë²½</b>: ë„¤íŠ¸ê°€ ë†’ì•„ì ¸ ë°©ì–´!</span></div>
                        <div class="item-row"><span class="item-icon">ğŸ”</span><span class="item-desc"><b>ê¼¬ê¼¬ëŒ ë³€ì‹ </b>: 3ë§ˆë¦¬ êµ°ë‹¨! ë“ì  ì‹œ 2ì !</span></div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:20px; border-top:1px solid #555; padding-top:15px;">
                <div style="font-size:1.5rem; color:#FFD700; margin-bottom:10px;">ğŸ® ì´ëª¨í‹°ì½˜ ì¡°ì‘í‚¤ ğŸ®</div>
                <div style="display:flex; justify-content:space-around; text-align:left; font-size:1.1rem; color:#ddd;">
                    <div>
                        <div style="color:#00d2ff; font-weight:bold; margin-bottom:5px;">Player 1</div>
                        <div>[1] : ğŸ˜œ ë©”ë¡±</div>
                        <div>[2] : ğŸ˜¡ ë²„ëŸ­</div>
                        <div>[3] : ğŸ˜± ìœ¼ì•…</div>
                        <div>[4] : ğŸ’© ë˜¥!</div>
                    </div>
                    <div>
                        <div style="color:#ff5e62; font-weight:bold; margin-bottom:5px;">Player 2</div>
                        <div>[ ã…¡ ] : ğŸ˜œ ë©”ë¡±</div>
                        <div>[ , ] : ğŸ˜¡ ë²„ëŸ­</div>
                        <div>[ . ] : ğŸ˜± ìœ¼ì•…</div>
                        <div>[ / ] : ğŸ’© ë˜¥!</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:20px; border-top:1px solid #555; padding-top:15px;">
                <div style="font-size:1.5rem; color:#FFD700; margin-bottom:10px;">ğŸ”¥ ìŠ¤ë§¤ì‹œ ê°€ì´ë“œ ğŸ”¥</div>
                <div style="text-align:left; font-size:1.1rem; color:#ddd; line-height:1.6; padding:0 20px;">
                    <div style="margin-bottom:10px;">
                        <span style="color:#00d2ff; font-weight:bold; font-size:1.2rem;">âš¡ ì¼ë°˜ ìŠ¤ë§¤ì‹œ:</span> 
                        ìƒëŒ€ë°©ì´ ê·¸ëƒ¥ ëª¸ìœ¼ë¡œ ë°›ê±°ë‚˜ ìŠ¬ë¼ì´ë”©í•´ì„œ ë°›ì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                    <div>
                        <span style="color:#ff5e62; font-weight:bold; font-size:1.2rem;">ğŸ”¥ ë¶ˆê½ƒìŠ› (ìŠˆí¼ ìŠ¤ë§¤ì‹œ):</span> 
                        ìƒëŒ€ë°©ì´ íƒ€ì´ë°ì„ ì •í™•íˆ ë§ì¶°ì„œ <b style="color:#fff; border-bottom:1px solid #fff;">ìŠ¤ë§¤ì‹œ í‚¤(ë°©ì–´)</b>ë¥¼ ëˆ„ë¥´ì§€ ì•Šìœ¼ë©´ ë°›ì•„ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;ê·¸ëƒ¥ ëª¸ìœ¼ë¡œ ë°›ìœ¼ë ¤ í•˜ë©´ <b style="color:red; font-size:1.3rem;">"ëš«ë ¸ë‹¤!!"</b>ë¼ëŠ” ë©”ì‹œì§€ì™€ í•¨ê»˜ ìºë¦­í„°ê°€ <b style="color:yellow;">ê¸°ì ˆ(Stun)</b>í•˜ê³  ë’¤ë¡œ íŠ•ê²¨ ë‚˜ê°‘ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="skillModal" onclick="closeModal(event, 'skillModal')">
        <div class="modal-content skill-modal-content">
            <div class="close-btn" onclick="openModal('skillModal')">Ã—</div>
            <div class="modal-title skill-title">âš¡ ìºë¦­í„° ê³ ìœ  ìŠ¤í‚¬ (í•„ì‚´ê¸°) âš¡</div>
            <div style="color: #bbb; margin-bottom: 25px; font-size: 1.3rem;">
                ê²Œì„ ì¤‘ ê²Œì´ì§€ ì•„ë˜ <b style="color:#00FFFF">í•˜ëŠ˜ìƒ‰ ë°”</b>ê°€ ê°€ë“ ì°¨ë©´ ì‚¬ìš© ê°€ëŠ¥! (ì¿¨íƒ€ì„ 10ì´ˆ)<br>
                <span style="color:#00d2ff">P1: Shift í‚¤</span> / <span style="color:#ff5e62">P2: Enter í‚¤</span>
            </div>
            <div class="skill-grid">
                <div class="skill-card">
                    <div class="skill-icon">ğŸ˜«</div>
                    <div class="skill-info">
                        <span class="skill-name">ë‹¤ì˜¨: ì¼ë¯¼ì´ì˜ ë–¼ì“°ê¸°</span>
                        <span class="skill-desc">ìƒëŒ€ë°©ì´ ë„ˆë¬´ ì‹œë„ëŸ¬ì›Œì„œ <b>ì í”„ë¥¼ ëª»í•˜ê²Œ</b> ë§Œë“­ë‹ˆë‹¤. (ì¤‘ë ¥ ì¦ê°€)</span>
                    </div>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">ğŸ‘¶</div>
                    <div class="skill-info">
                        <span class="skill-name">ìœ ì£¼: ë‚œìŸì´ì˜ ì €ì£¼</span>
                        <span class="skill-desc">ì£¼ë¬¸ì„ ì™¸ì›Œì„œ <b>ìƒëŒ€ë°©ì„ ì•„ì£¼ ì‘ê²Œ(ë‚œìŸì´)</b> ë§Œë“¤ì–´ë²„ë¦½ë‹ˆë‹¤.</span>
                    </div>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">ğŸ¤±</div>
                    <div class="skill-info">
                        <span class="skill-name">ì—„ë§ˆ: ê³µí¬ì˜ ë¶„ì‹ ìˆ </span>
                        <span class="skill-desc">ê³µ ì£¼ë³€ì— <b>ê°€ì§œ ê³µë“¤ì´ íŠ€ì–´ë‚˜ì™€</b> ì‹œì•¼ë¥¼ ë°©í•´í•˜ê³  í˜¼ë€ì„ ì¤ë‹ˆë‹¤.</span>
                    </div>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">ğŸ’³</div>
                    <div class="skill-info">
                        <span class="skill-name">ì•„ë¹ : ë²•ì¸ì¹´ë“œ ê¸ê¸°</span>
                        <span class="skill-desc">ê²°ì œ ë‚´ì—­ì²˜ëŸ¼ <b>ê³µì„ íˆ¬ëª…í•˜ê²Œ(ìœ ë ¹ê³µ)</b> ë§Œë“­ë‹ˆë‹¤.</span>
                    </div>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">ğŸ›</div>
                    <div class="skill-info">
                        <span class="skill-name">ëˆê¹ŒìŠ¤í• ë§¤: ë¬´í•œ ë¦¬í•„</span>
                        <span class="skill-desc">ë°° í„°ì§€ê²Œ ë¨¹ìœ¼ë¼ê³  <b>ê³µì„ ì—„ì²­ë‚˜ê²Œ í¬ê²Œ</b> ë§Œë“­ë‹ˆë‹¤.</span>
                    </div>
                </div>
                <div class="skill-card">
                    <div class="skill-icon">ğŸ´</div>
                    <div class="skill-info">
                        <span class="skill-name">ê·¼ìœ¡í• ë°°: ë‚˜ ë•ŒëŠ” ë§ì´ì•¼</span>
                        <span class="skill-desc">ì˜›ë‚  ì´ì•¼ê¸°ë¥¼ ì‹œì‘í•´ì„œ <b>ê²Œì„ ì†ë„ë¥¼ ëŠë¦¬ê²Œ(ìŠ¬ë¡œìš°)</b> ë§Œë“­ë‹ˆë‹¤.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h1>CHARACTER SELECT</h1>
        
        <div class="mode-switch">
            <div class="mode-btn" id="btn2P" onclick="setGameMode('2p')">2 PLAYERS (vs ì¹œêµ¬)</div>
            <div class="mode-btn" id="btn1P" onclick="setGameMode('ai')">1 PLAYER (vs AI)</div>
        </div>

        <div class="status" id="statusMsg">PLAYER 1 (ì™¼ìª½) ì„ íƒí•˜ì„¸ìš”</div>
        
        <div class="char-grid" id="charGrid"></div>

        <div class="speed-control">
            <div class="speed-title">GAME SPEED</div>
            <div class="speed-options">
                <div class="speed-btn" onclick="selectSpeed(0.7, this)">VERY SLOW</div>
                <div class="speed-btn" onclick="selectSpeed(0.85, this)">SLOW</div>
                <div class="speed-btn active" onclick="selectSpeed(1.0, this)">NORMAL</div>
                <div class="speed-btn" onclick="selectSpeed(1.3, this)">FAST</div>
                <div class="speed-btn" onclick="selectSpeed(1.6, this)">VERY FAST</div>
            </div>
        </div>

        <div class="btn-group">
            <button class="guide-btn" onclick="openModal('itemModal')">ğŸ“œ ì•„ì´í…œ ë„ê°</button>
            <button class="skill-btn" onclick="openModal('skillModal')">âš¡ ìŠ¤í‚¬ ê°€ì´ë“œ</button>
        </div>

        <div class="footer">ëœë¤ ì„ íƒì„ í•˜ë ¤ë©´ '?' ì¹´ë“œë¥¼ ëˆ„ë¥´ì„¸ìš”! (50% í™•ë¥ ë¡œ íˆë“  ìºë¦­í„° ë“±ì¥)</div>
    </div>

    <script>
        const selectSongs = ['song/select.mp3', 'song/select1.mp3'];
        const randomSelectIndex = Math.floor(Math.random() * selectSongs.length);
        const bgMusic = new Audio(selectSongs[randomSelectIndex]);
        bgMusic.loop = true; bgMusic.volume = 0.5;
        const randomFinishSound = new Audio('song/ramdom.mp3');
        const hoverSound = new Audio('song/coin.mp3'); 

        window.addEventListener('load', () => {
            const playPromise = bgMusic.play();
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    document.body.addEventListener('click', () => {
                        if(bgMusic.paused) bgMusic.play();
                    }, { once: true });
                });
            }
            // ê¸°ë³¸ ëª¨ë“œ ì„¤ì •
            setGameMode('2p');
        });

        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const cursorDot = document.getElementById('cursorDot');
        const cursorParticles = [];
        let mouseX = 0, mouseY = 0;

        class CursorSparkle {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.life = 1.0;
                this.color = `hsl(${Math.random()*360}, 100%, 70%)`;
                this.size = Math.random() * 5 + 2;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                this.life -= 0.05; this.size *= 0.95;
            }
            draw() {
                ctx.globalAlpha = this.life;
                ctx.fillStyle = this.color;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
                ctx.globalAlpha = 1.0;
            }
        }

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX; mouseY = e.clientY;
            cursorDot.style.left = mouseX - 10 + 'px';
            cursorDot.style.top = mouseY - 10 + 'px';
            for(let i=0; i<2; i++) { cursorParticles.push(new CursorSparkle(mouseX, mouseY)); }
        });

        const particles = [];
        class BgParticle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3;
                this.speedX = (Math.random() - 0.5) * 1;
                this.speedY = (Math.random() - 0.5) * 1;
                this.color = `rgba(${Math.random()*100 + 155}, ${Math.random()*100 + 155}, 255, ${Math.random() * 0.5})`;
            }
            update() {
                this.x += this.speedX; this.y += this.speedY;
                if(this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if(this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        for(let i=0; i<80; i++) particles.push(new BgParticle());
        
        function animateBg() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            for (let i = cursorParticles.length - 1; i >= 0; i--) {
                cursorParticles[i].update(); cursorParticles[i].draw();
                if (cursorParticles[i].life <= 0) cursorParticles.splice(i, 1);
            }
            requestAnimationFrame(animateBg);
        }
        animateBg();
        window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };

        let gameSpeedRatio = 1.0;
        let currentGameMode = '2p'; // '2p' or 'ai'

        function selectSpeed(ratio, btn) {
            gameSpeedRatio = ratio;
            document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function setGameMode(mode) {
            currentGameMode = mode;
            if(mode === '2p') {
                document.getElementById('btn2P').classList.add('active');
                document.getElementById('btn1P').classList.remove('active');
                statusMsg.innerHTML = "PLAYER 1 (ì™¼ìª½) ì„ íƒí•˜ì„¸ìš”";
                statusMsg.style.borderColor = "#00d2ff"; statusMsg.style.color = "#00d2ff";
            } else {
                document.getElementById('btn1P').classList.add('active');
                document.getElementById('btn2P').classList.remove('active');
                statusMsg.innerHTML = "ë‚´ ìºë¦­í„° (P1)ë¥¼ ì„ íƒí•˜ì„¸ìš” (AI ëŒ€ì „)";
                statusMsg.style.borderColor = "#00FF00"; statusMsg.style.color = "#00FF00";
            }
            resetSelection();
        }

        function resetSelection() {
            p1ID = null;
            document.querySelectorAll('.char-card').forEach(c => {
                c.classList.remove('selected', 'p1-border', 'p2-border');
            });
            document.querySelectorAll('.badge').forEach(b => b.style.display = 'none');
        }

        // --- [ìˆ˜ì •ëœ ëª¨ë‹¬ ë¡œì§] ---
        function openModal(id) {
            const modal = document.getElementById(id);
            modal.style.display = (modal.style.display === 'flex') ? 'none' : 'flex';
        }

        function closeModal(e, id) {
            if (e.target.id === id) {
                document.getElementById(id).style.display = 'none';
            }
        }

        const CHARACTERS = [
            { id: 0, name: "ë‹¤ì˜¨", src: 'image/TWO.png', frameIndex: 0, hidden: false },
            { id: 1, name: "ìœ ì£¼", src: 'image/TWO.png', frameIndex: 2, hidden: false },
            { id: 2, name: "ì—„ë§ˆ", src: 'image/ONE.png', frameIndex: 0, hidden: false },
            { id: 3, name: "ì•„ë¹ ", src: 'image/ONE.png', frameIndex: 2, hidden: false },
            { id: 4, name: "ëˆê¹ŒìŠ¤í• ë§¤", src: 'image/Three.png', frameIndex: 0, hidden: true },
            { id: 5, name: "ê·¼ìœ¡í• ë°°", src: 'image/Three.png', frameIndex: 2, hidden: true }
        ];

        let p1ID = null;
        let isSpinning = false; 
        const grid = document.getElementById('charGrid');
        const statusMsg = document.getElementById('statusMsg');

        function createCard(char) {
            if (char.hidden) return; 
            const card = document.createElement('div');
            card.className = 'char-card';
            card.id = `card-${char.id}`; 
            
            const badge = document.createElement('div');
            badge.className = 'badge';
            badge.innerText = "READY";
            
            const preview = document.createElement('div');
            preview.className = 'preview';
            preview.style.backgroundImage = `url('${char.src}')`;
            preview.style.backgroundPosition = `-${char.frameIndex * 140}px 0px`; 

            const nameDiv = document.createElement('div');
            nameDiv.className = 'name';
            nameDiv.innerText = char.name;

            card.appendChild(badge); card.appendChild(preview); card.appendChild(nameDiv);
            
            card.addEventListener('mouseenter', () => {
                if(!isSpinning) {
                    hoverSound.currentTime = 0;
                    hoverSound.play().catch(()=>{});
                }
            });

            card.onclick = () => { if(isSpinning) return; selectChar(char.id, char.name, card, badge); }
            grid.appendChild(card);
        }
        CHARACTERS.forEach(char => createCard(char));

        const randomCard = document.createElement('div');
        randomCard.className = 'char-card';
        randomCard.style.borderColor = "#ffeb3b";
        const randomBadge = document.createElement('div'); randomBadge.className = 'badge';
        const randomIcon = document.createElement('div'); randomIcon.className = 'random-icon'; randomIcon.innerText = "?";
        const randomPreview = document.createElement('div'); randomPreview.className = 'preview'; randomPreview.style.display = 'none';
        const randomName = document.createElement('div'); randomName.className = 'name'; randomName.innerText = "ëœë¤";

        randomCard.appendChild(randomBadge); randomCard.appendChild(randomIcon); randomCard.appendChild(randomPreview); randomCard.appendChild(randomName);

        randomCard.addEventListener('mouseenter', () => {
            if(!isSpinning) {
                hoverSound.currentTime = 0;
                hoverSound.play().catch(()=>{});
            }
        });

        randomCard.onclick = () => {
            if(isSpinning) return;
            if(bgMusic.paused) bgMusic.play().catch(()=>{});
            isSpinning = true;
            
            const currentPlayerColor = (p1ID === null) ? "#00d2ff" : "#ff5e62";
            randomCard.style.borderColor = currentPlayerColor;
            randomCard.style.boxShadow = `0 0 30px ${currentPlayerColor}`;
            randomIcon.style.display = 'none';
            randomPreview.style.display = 'block';
            randomName.innerText = "ì¶”ì²¨ì¤‘...";

            const spinList = CHARACTERS;
            let count = 0; let speed = 80; let spinIndex = 0; let maxIterations = 20;

            const spinInterval = setInterval(() => {
                spinIndex = (spinIndex + 1) % spinList.length;
                const char = spinList[spinIndex];
                randomPreview.style.backgroundImage = `url('${char.src}')`;
                randomPreview.style.backgroundPosition = `-${char.frameIndex * 140}px 0px`;
                count++;
                if (count >= maxIterations) { clearInterval(spinInterval); determineResult(); }
            }, speed);
        };

        function determineResult() {
            const rand = Math.random(); 
            let targetList = [];
            if (rand < 0.5) targetList = CHARACTERS.filter(c => c.hidden);
            else targetList = CHARACTERS.filter(c => !c.hidden);

            const pickedChar = targetList[Math.floor(Math.random() * targetList.length)];
            randomPreview.style.backgroundImage = `url('${pickedChar.src}')`;
            randomPreview.style.backgroundPosition = `-${pickedChar.frameIndex * 140}px 0px`;
            randomName.innerText = pickedChar.name;

            if (pickedChar.hidden) { randomName.style.color = "#FFD700"; randomName.style.textShadow = "0 0 10px red"; } 
            else { randomName.style.color = "white"; randomName.style.textShadow = "2px 2px 0 #000"; }
            
            setTimeout(() => {
                randomFinishSound.play().catch(()=>{});
                
                selectChar(pickedChar.id, `ëœë¤(${pickedChar.name})`, randomCard, randomBadge, true);
                setTimeout(() => {
                     isSpinning = false; randomIcon.style.display = 'block'; randomPreview.style.display = 'none';
                     randomName.innerText = "ëœë¤"; randomName.style.color = "white"; randomName.style.textShadow = "2px 2px 0 #000";
                     if (p1ID !== null) randomCard.style.borderColor = "#ff5e62"; else randomCard.style.borderColor = "#ffeb3b";
                     randomCard.style.boxShadow = "none";
                }, 1000); 
            }, 500);
        }
        grid.appendChild(randomCard);

        function selectChar(id, name, cardElem, badgeElem, isRandom = false) {
            if(bgMusic.paused) bgMusic.play().catch(()=>{});

            if (p1ID === null) {
                // P1 ì„ íƒ
                p1ID = id;
                if (!isRandom) { cardElem.classList.add('selected', 'p1-border'); badgeElem.innerText = "P1"; badgeElem.classList.add('p1'); badgeElem.style.display = 'block'; }
                
                if (currentGameMode === 'ai') {
                    // AI ëª¨ë“œë©´ ë°”ë¡œ AI ìºë¦­í„° ëœë¤ ì„ íƒ í›„ ì‹œì‘
                    statusMsg.innerHTML = `<span style="color:#00d2ff">${name}</span> ì„ íƒ ì™„ë£Œ! <br> <span style="color:#00FF00">ìƒëŒ€ AI(CPU)ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>`;
                    
                    setTimeout(() => {
                        // AIëŠ” 50% í™•ë¥ ë¡œ íˆë“  í¬í•¨ ëœë¤
                        const rand = Math.random(); 
                        let targetList = (rand < 0.5) ? CHARACTERS.filter(c => c.hidden) : CHARACTERS.filter(c => !c.hidden);
                        const aiChar = targetList[Math.floor(Math.random() * targetList.length)];
                        
                        window.location.href = `ë‹¤ì˜¨.html?p1=${p1ID}&p2=${aiChar.id}&speed=${gameSpeedRatio}&mode=ai`;
                    }, 1000);

                } else {
                    // 2ì¸ ëª¨ë“œë©´ P2 ì„ íƒ ëŒ€ê¸°
                    statusMsg.innerHTML = `<span style="color:#00d2ff">${name}</span> ì„ íƒ ì™„ë£Œ! <br> <span style="color:#ff5e62">PLAYER 2 (ì˜¤ë¥¸ìª½) ì„ íƒí•˜ì„¸ìš”</span>`;
                    statusMsg.style.borderColor = "#ff5e62"; statusMsg.style.color = "#ff5e62";
                }

            } else {
                // P2 ì„ íƒ (2ì¸ ëª¨ë“œì¼ ë•Œë§Œ ì—¬ê¸° ë„ë‹¬)
                if (!isRandom) { cardElem.classList.add('selected', 'p2-border'); badgeElem.innerText = "P2"; badgeElem.classList.add('p2'); badgeElem.style.display = 'block'; }
                statusMsg.innerHTML = `P2: <span style="color:#ff5e62">${name}</span> ì„ íƒ ì™„ë£Œ!<br>GAME STARTING...`;
                
                setTimeout(() => {
                    window.location.href = `ë‹¤ì˜¨.html?p1=${p1ID}&p2=${id}&speed=${gameSpeedRatio}&mode=2p`;
                }, 500); 
            }
        }
    </script>
</body>
</html>